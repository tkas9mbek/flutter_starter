# UniMed

Application for managing appointments and medical records.

# UniMed Architecture

## Goals

- **Simplicity**: Минимальное количество абстракций и слоев для упрощения разработки.
- **Clear Architectural Principles**:
  - **Testability**: Abstract data sources для легкой замены между различными data sources.
  - **Separation of Concerns**: Каждый слой должен иметь чётко определённые, независимые обязанности.
  - **Dependency Rules**: Установка чётких правил того, как слои взаимодействуют.

## Architecture

```
--------------------------- Data
            {DS}
------------  ↑  ---------- Domain
        {Abstract DS}
              ↑
         {Repository}
------------  ↑  ---------- Presentation
           {Bloc}
              ↑          
          {Flutter} ↔ {Flutter}
```

- **Horizontal Dependencies**: Только виджеты из Flutter (Presentation) слоя могут иметь горизонтальные зависимости (т.е. зависеть от других виджетов). Все остальные слои должны строго соблюдать вертикальные зависимости.
- **Flutter Dependency Rule**: Слои, кроме Flutter (Presentation) слоя, не должны иметь прямых зависимостей от Flutter framework.
- **Inversion of Control**: Все зависимости должны передаваться извне с использованием Dependency Injection (DI).

## Structure

Стандартная папка фичи структурирована следующим образом:
```
feature1/
  ├── data/               # Абстрактные и конкретные реализации источников данных
  ├── domain/             # Интерфейсы репозиториев
  ├── model/              # Модели данных
  ├── configs/            # DI, константы и другие конфигурации
  ├── custom/             # Прочее, например, утилиты, расширения
  └── ui/                 # Слой пользовательского интерфейса для фичи
    └── ui-feature1/
      ├── bloc/       # Блоки, специфичные для фичи
      ├── screen/     # Экраны и связанные с ними файлы маршрутов
      ├── widget/     # Виджеты, специфичные для фичи
      └── custom/     # Дополнительные папки (например, хелперы, модели)
```

Ключевые правила:

*  Любая папка за пределами ui не должна содержать зависимостей от Flutter framework.

*  Папка ui может быть логически разделена на подпапки. Как правило, каждый отдельный экран в UI-дизайне должен иметь собственную папку.

*  Общие UI-модели или виджеты, предназначенные для повторного использования в нескольких фичах, должны располагаться в проекте uikit.


### Группировка небольших фич
Некоторые функции слишком малы, чтобы выделять для них отдельную папку верхнего уровня. Например, окружения, фундаменты для главной страницы можно положить в одну папку. Внутри каждой будет обычнаю структура.

```
application/
  ├── environment/
  ├── global/
  └── root/
```

### Структурирование папки UI
Организация папки ui зависит от сложности фичи.

#### Для простых фич
Если у фичи относительно небольшой UI (например, один или два простых экрана), папка ui может иметь плоскую структуру, напрямую содержащую папки bloc, widget и screen.

```
ui/
  ├── bloc/
  ├── screen/
  └── widget/
```
#### Для сложных фич
Если у фичи большой и сложный UI, например, экран со списком, экран с детальной информацией и экраны операций (создание, редактирование), лучше всего разделить папку ui. Создайте отдельную папку для каждого основного UI-компонента (list, details, operation), и каждая из этих подпапок будет содержать свои собственные папки bloc, widget и screen.
```
ui/
  ├── list/
  │   ├── bloc/
  │   ├── screen/
  │   └── widget/
  ├── details/
  │   ├── bloc/
  │   ├── screen/
  │   └── widget/
  └──  operation/
  │   ├── bloc/
  │   ├── screen/
  │   └── widget/
```